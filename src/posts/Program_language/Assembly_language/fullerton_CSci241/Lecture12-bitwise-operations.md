---
category: 
- 汇编语言
---

# 第十二讲：按位运算

## 按位运算

位运算在汇编级别变得更加重要。我们已经学习了```XOR```（异或），这里我们将学习其他操作```or```、```and```、```not```、```andn```（与非），以及位移和旋转操作。除了这些在 C/C++ 按位运算符中具有直接类似物的操作之外，汇编还支持 C/C++ 没有的其他按位操作。最后，```test```操作是按位比较运算符，用于构建取决于某些位的状态的条件分支。

**位运算：AND、OR、NOT、AND-NOT**

```x86asm
not  dest         ; dest = ~dest
and  dest, src    ; dest = dest & src
or   dest, src    ; dest = dest | src
andn dest, src    ; dest = dest & ~src
xor  dest, src    ; dest = dest ^ src
```

通常的限制如下：
- 两个操作数必须具有相同的大小，它们不能都在内存中，并且只有源操作数可以是立即数。
- not 可以与寄存器或内存位置一起使用。

查看这些操作的真值表可能会很有用。

- 如果 a 为 0，则 ~a 为 1；如果 a 为 1，则 ~a 为 0：
  
  |a| ~a|
  |--|--|
  |0|1|
  |1|0|
- 只有当a和b都为1时a和b才为1，否则为0。
  |a| b| a& b|
  |--|--|--|
  |0|0|0|
  |1|0|0|
  |0|1|0|
  |1|1|1|
- 如果 a 或 b 为 1，则 a | b 为 1；只有当 a 或 b 均为 0 时，a | b 才为 0。
  |a|b| a or b| 
  |--|--|--|
  |0|0|0|
  |1|0|1|
  |0|1|1|
  |1|1|1|
