---
category: 
  - 分布式系统
tag:
  - 分布式系统
---

- [Zookeeper](#zookeeper)
- [2](#2)
  - [2.3 ZooKeeper 保证](#23-zookeeper-保证)

# Zookeeper


# 2

## 2.3 ZooKeeper 保证

ZooKeeper 有两个基本的顺序保证：
- **线性化写入**：所有更新 ZooKeeper 状态的请求都是可序列化的，并且遵循先后顺序；
- **先进先出的客户端顺序**：来自给定客户端的所有请求都按照客户端发送的顺序执行。

请注意，我们对线性一致性的定义与赫利希（Herlihy）最初提出的定义不同，我们称之为 A - 线性一致性（异步线性一致性）。在赫利希对线性一致性的原始定义中，一个客户端一次只能有一个未完成的操作（一个客户端是一个线程）。在我们的定义中，我们允许一个客户端有多个未完成的操作，因此我们可以选择不保证同一客户端的未完成操作的特定顺序，或者保证先进先出顺序。我们为我们的属性选择了后者。重要的是要注意，所有适用于线性一致对象的结果也适用于 A - 线性一致对象，因为满足 A - 线性一致性的系统也满足线性一致性。由于只有更新请求是 A - 线性一致的，ZooKeeper 在每个副本上本地处理读请求。这使得服务能够随着服务器添加到系统中而线性扩展。

为了了解这两个保证是如何相互作用的，考虑以下场景。一个由多个进程组成的系统选举出一个领导者来指挥工作进程。当一个新的领导者接管系统时，它必须更改大量的配置参数，并在完成后通知其他进程。那么我们有两个重要的要求：
- 当新的领导者开始进行更改时，我们不希望其他进程开始使用正在被更改的配置；
- 如果新的领导者在配置完全更新之前死亡，我们不希望进程使用这个部分配置。
