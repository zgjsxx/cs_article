
今天讲讲工作中的事吧，领导要求调研一个事，mutex性能如何？mutex无竞争时和有竞争时效率如何？

0x1、结论
我和领导汇报时，都习惯先说结论，领导可以很容易抓住重点，如果感兴趣就继续看。

 
结论如下：

没有争抢时，不进入内核态。性能与自旋锁类似。
有争抢时，没抢到，进入内核态等待唤醒。
0x2、mutex实现
mutex实现时，分用户态部分和内核态部分，分别承担不同的功能：

用户态：使用test and set来测试是否可以抢到锁。
内核态：使用futex系统调用来等待和唤醒。