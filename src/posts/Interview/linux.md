---
category: 
- 面经
tag:
- Linux面经
---

# Linux

## 介绍几个GCC的优化参数

以下是一些常用的GCC优化参数：
- -O0禁用所有优化，编译速度最快，但代码运行速度最慢。
- -O1启用基本优化，编译速度适中，代码运行速度适度提升。
- -O3启用所有可用优化，编译速度最慢，代码运行速度最快。
- -Os优化代码大小，编译速度较快，代码运行速度略微提升。
- -0g优化调试体验，编译速度适中，代码运行速度略微提升。

其他常见优化参数：
- -march=指定目标体系架构，例如```-march=native```使用当前机器的最佳指令集
- -mtune=指定目标处理器，例如```-mtune=corei7```使用针对Corei7处理器的优化。
- -format-frame-pointer省略帧指针，减少代码大小，但可能影响测试。
- -finline-functions内联函数，减少函数调用开销
- -fno-builtin禁用内建函数，例如memcpy、strlen等。

```-march```和```-mtune```的区别：

- 如果您使用 ```-march```，那么 GCC 将可以自由生成在指定 CPU 上运行的指令，但（通常）不能在架构系列中的早期 CPU 上运行。

- 如果您只使用 ```-mtune```，那么编译器将生成适用于其中任何一个的代码，但会优先考虑在您指定的特定 CPU 上运行速度最快的指令序列。例如为该 CPU 适当地设置循环展开启发式。

## 在shell中，使用source执行一个脚本和不使用source执行一个脚本有什么区别？

在shell中，使用```source```命令执行一个脚本会导致该脚本在当前```shell```环境中执行。这意味着脚本中的变量、函数以及其他定义会影响当前的```shell```会话。

如果不使用```source```命令，而是简单地执行脚本，则会启动一个新的子```shell```来执行该脚本。在子```shell```中执行的所有更改（例如定义的变量、函数等）都不会影响父```shell```或当前的```shell```会话。这意味着在不使用```source```命令的情况下，脚本中的更改只会在子```shell```中生效，执行完脚本后不会影响到当前```shell```的环境。

简而言之，```source```命令用于在当前shell环境中执行脚本，而不使用```source```则会在一个新的子```shell```中执行脚本。